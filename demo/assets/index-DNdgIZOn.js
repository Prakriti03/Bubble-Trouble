var Y=Object.defineProperty;var R=(l,t,s)=>t in l?Y(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var e=(l,t,s)=>R(l,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();const o={CANVAS_HEIGHT:window.innerHeight-10,CANVAS_WIDTH:window.innerWidth-300},X={PLAYER_WIDTH:31,PLAYER_HEIGHT:55},D=.5,O=1.5,V=50,G=150,m=100,U=0,k=60,M=.1,h=80,C={WIDTH:30,HEIGHT:30},_="/Bubble-Trouble/demo/background.png",F="/Bubble-Trouble/demo/bgImage2.jpeg",$="/Bubble-Trouble/demo/bgImage3.jpeg",z="/Bubble-Trouble/demo/bgImage4.jpeg",j="/Bubble-Trouble/demo/bgImage5.jpeg",W={Bubbles:[{centerX:h+30,centerY:250,radius:30}],imageSrc:_,wallsPosX:[],isWallPresent:0,level:1},q={Bubbles:[{centerX:h+60,centerY:250,radius:60}],imageSrc:F,wallsPosX:[],isWallPresent:0,level:2},K={Bubbles:[{centerX:h+30,centerY:250,radius:30},{centerX:800,centerY:250,radius:50}],wallsPosX:[600],imageSrc:$,isWallPresent:0,level:3},Z={Bubbles:[{centerX:h+60,centerY:250,radius:60},{centerX:800,centerY:250,radius:50}],wallsPosX:[700],imageSrc:z,isWallPresent:0,level:4},H={Bubbles:[{centerX:h+30,centerY:250,radius:30},{centerX:400,centerY:250,radius:50},{centerX:820,centerY:250,radius:60}],wallsPosX:[300,700],imageSrc:j,isWallPresent:0,level:5},v="/Bubble-Trouble/demo/wall.jpg";var u=(l=>(l.LEFT="Left",l.RIGHT="Right",l.STATIONARY="Stationary",l.SHOOT="Shoot",l))(u||{}),g=(l=>(l.RUNNING="Running",l.END="End",l))(g||{});class A{constructor(t,s,r,i,a,d){e(this,"img");e(this,"posX");e(this,"posY");e(this,"ctx");e(this,"spriteWidth");e(this,"spriteHeight");e(this,"spriteX");e(this,"spriteY");this.img=new Image,this.img.src=s,this.spriteWidth=47.25,this.spriteHeight=56,this.ctx=t,this.spriteX=r,this.spriteY=i,this.posX=a,this.posY=d,this.drawSprite()}drawSprite(){this.ctx.drawImage(this.img,this.spriteX,this.spriteY,this.spriteWidth,this.spriteHeight,this.posX,this.posY,this.spriteWidth,this.spriteHeight)}}const J="/Bubble-Trouble/demo/hero.png",Q="/Bubble-Trouble/demo/hero-2.png",tt="/Bubble-Trouble/demo/arrow.png",y=class y{constructor(t,s){e(this,"posX");e(this,"posY");e(this,"ctx");e(this,"arrowImage");e(this,"isActive");e(this,"playerMovement");e(this,"bubbleArray");e(this,"isBubbleArrowCollisionTrue");e(this,"isHittable",!1);this.ctx=t,this.posX=s,this.posY=o.CANVAS_HEIGHT-m,this.arrowImage=new Image,this.arrowImage.src=tt,this.isActive=!0}draw(){this.isActive&&this.ctx.drawImage(this.arrowImage,this.posX,this.posY)}update(){y.isSticky&&this.posY<=0||(this.posY<=0&&(this.isActive=!1),this.isActive&&(this.posY-=6))}checkCollision(t,s,r){return this.posX>=t-r&&this.posX<=t+r&&this.posY<=s+r}};e(y,"isSticky",!1);let b=y;class et{constructor(t,s,r,i){e(this,"imgSource");e(this,"ctx");e(this,"posX");e(this,"posY");e(this,"movement");e(this,"dx");e(this,"playerWidth");e(this,"playerHeight");e(this,"spriteWidth");e(this,"spriteHeight");e(this,"frameX");e(this,"frameY");e(this,"gameFrame");e(this,"staggerFrame");e(this,"sprite");e(this,"controls");e(this,"tempMovement");e(this,"life");e(this,"score");e(this,"powerUps");e(this,"initialPosX");e(this,"arrow");e(this,"isHittable");this.ctx=t,this.playerHeight=X.PLAYER_HEIGHT,this.playerWidth=X.PLAYER_WIDTH,this.posY=o.CANVAS_HEIGHT-this.playerHeight-m,this.dx=3,this.movement=u.STATIONARY,this.spriteWidth=47.25,this.spriteHeight=56,this.frameX=0,this.frameY=0,this.gameFrame=0,this.staggerFrame=20,this.life=r,this.score=i,this.powerUps=[],this.initialPosX=s===0?h:o.CANVAS_WIDTH-h-this.playerWidth,this.posX=this.initialPosX,this.arrow=new b(t,this.posX),s===0?(this.imgSource=J,this.controls={left:"ArrowLeft",right:"ArrowRight",shoot:"Space"},this.posX=h):s===1&&(this.imgSource=Q,this.controls={left:"KeyA",right:"KeyD",shoot:"KeyW"},this.posX=h+this.playerWidth)}get x(){return this.posX}get y(){return this.posY}get width(){return this.playerWidth}get height(){return this.playerHeight}draw(){this.ctx.beginPath(),this.movement===u.STATIONARY&&(this.sprite=new A(this.ctx,this.imgSource,8,112,this.posX,this.posY)),this.movement===u.LEFT&&(this.sprite=new A(this.ctx,this.imgSource,this.frameX*this.spriteWidth,57,this.posX,this.posY),this.gameFrame%this.staggerFrame==0&&(this.frameX<3?this.frameX++:this.frameX=0),this.gameFrame++),this.movement===u.RIGHT&&(this.sprite=new A(this.ctx,this.imgSource,this.frameX*this.spriteWidth,0,this.posX,this.posY),this.gameFrame%this.staggerFrame==0&&(this.frameX<3?this.frameX++:this.frameX=0),this.gameFrame++),this.ctx.closePath()}update(){this.movement===u.LEFT&&this.posX>=h&&(this.posX-=this.dx),c.walls.forEach(t=>{this.posX>=t.posX-this.playerWidth&&(this.posX-=this.dx)}),this.movement===u.RIGHT&&this.posX+this.spriteWidth<=o.CANVAS_WIDTH-h&&(this.posX+=this.dx)}updateLives(){this.life=this.life-1}incrementScore(){this.score+=1,console.log(this.score)}activateStickyArrow(){b.isSticky=!0}}class P{constructor(t,s){e(this,"posX");e(this,"posY");e(this,"width");e(this,"height");e(this,"ctx");e(this,"groundImg");e(this,"level");this.ctx=t,this.posX=U,this.posY=o.CANVAS_HEIGHT-m,this.width=o.CANVAS_WIDTH,this.height=m,this.groundImg=new Image,this.groundImg.src=v,this.level=s}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.groundImg,this.posX,this.posY,this.width,this.height),this.ctx.closePath(),this.drawTexts("Player 1",h,o.CANVAS_HEIGHT-10),this.drawTexts("Level",(o.CANVAS_WIDTH-h)/2,o.CANVAS_HEIGHT-50),this.drawTexts("Player 2",o.CANVAS_WIDTH-h-100,o.CANVAS_HEIGHT-10),this.drawTexts(this.level.toString(),(o.CANVAS_WIDTH-h)/2+25,o.CANVAS_HEIGHT-10)}drawTexts(t,s,r){this.ctx.font="24px Luckiest Guy",this.ctx.fillStyle="red";const i=t,d=this.ctx.measureText(i).width,p=parseInt(this.ctx.font,7),x=7,S=s-x,T=r-p-x,E=d+2*x,B=p+2*x;this.ctx.fillStyle="#D3D3D3",this.ctx.fillRect(S,T,E,B),this.ctx.strokeStyle="grey",this.ctx.lineWidth=3,this.ctx.strokeRect(S,T,E,B),this.ctx.fillStyle="red",this.ctx.fillText(i,s,r)}}class w{constructor(t,s){e(this,"posX");e(this,"posY");e(this,"width");e(this,"height");e(this,"ctx");e(this,"wallImage");e(this,"disappearing",!1);e(this,"disappearingSpeed",10);this.posX=s,this.posY=0,this.width=h/2,this.height=o.CANVAS_HEIGHT-m,this.ctx=t,this.wallImage=new Image,this.wallImage.src=v}drawExtraWalls(){this.ctx.drawImage(this.wallImage,this.posX,this.posY,this.width,this.height)}startDisappearing(){this.disappearing=!0}update(){this.disappearing&&this.height>0&&(this.height-=this.disappearingSpeed)}drawDefaultWalls(){this.ctx.drawImage(this.wallImage,0,0,h,o.CANVAS_HEIGHT),this.ctx.drawImage(this.wallImage,o.CANVAS_WIDTH-h,0,h,o.CANVAS_HEIGHT)}}class f{constructor(t,s,r,i,a){e(this,"ctx");e(this,"centerX");e(this,"centerY");e(this,"radius");e(this,"dy");e(this,"dx");e(this,"numberOfBubbles");e(this,"bubblePlayerDx");e(this,"bubblePlayerDy");e(this,"bubblePlayerDistance");e(this,"closestPlayerPosX");e(this,"closestPlayerPosY");e(this,"isBubbleArrowCollisionTrue");e(this,"isPlayerBubbleCollisionTrue");e(this,"mass");e(this,"gravity");e(this,"wall");this.ctx=t,this.centerX=i,this.centerY=a,this.radius=r,this.gravity=M,this.dy=D,this.dx=O,this.numberOfBubbles=s,this.mass=this.radius}getBallGradient(t,s,r){const i=this.ctx.createRadialGradient(this.centerX-this.radius/3,this.centerY-this.radius/3,this.radius/4,this.centerX,this.centerY,this.radius);return i.addColorStop(0,t),i.addColorStop(.5,s),i.addColorStop(1,r),i}get x(){return this.centerX}get y(){return this.centerY}get r(){return this.radius}draw(t,s){const r=this.getBallGradient("white","red","darkred");this.ctx.beginPath(),this.ctx.arc(t,s,this.radius,0,2*Math.PI,!1),this.ctx.fillStyle=r,this.ctx.fill(),this.ctx.closePath()}calculateInitialVelocity(t){return-4*(1+t/k)}update(){this.dy+=this.gravity,this.centerX+=this.dx,this.centerY+=this.dy,this.centerY+this.radius>=o.CANVAS_HEIGHT-m&&(this.centerY=o.CANVAS_HEIGHT-m-this.radius,this.dy=this.calculateInitialVelocity(this.radius)),(this.centerX+this.radius>=o.CANVAS_WIDTH-h||this.centerX-this.radius<=h)&&(this.dx*=-1),c.walls.forEach(t=>{(this.centerX+this.radius>=t.posX&&this.centerX+this.radius<=t.posX+h/2||this.centerX-this.radius<=t.posX+h/2&&this.centerX+this.radius>t.posX)&&(this.dx*=-1)})}splitBubbles(){this.radius/=2;const t=new f(this.ctx,this.numberOfBubbles,this.radius,this.centerX,this.centerY);t.centerX=this.centerX-this.radius,t.centerY=this.centerY,t.dx=-Math.abs(this.dx),t.dy=this.calculateInitialVelocity(this.radius)*.8;const s=new f(this.ctx,this.numberOfBubbles,this.radius,V,G);s.centerX=this.centerX+this.radius,s.centerY=this.centerY,s.dx=Math.abs(this.dx),s.dy=this.calculateInitialVelocity(this.radius)*.8;const r=c.bubbleArray.indexOf(this);r>=0&&r<c.bubbleArray.length&&c.bubbleArray.splice(r,1),c.bubbleArray.push(t,s)}}class st{constructor(t){e(this,"gameManager");e(this,"levels");e(this,"currentLevelIndex");e(this,"bubble");e(this,"wall");e(this,"level");this.gameManager=t,this.levels=[W,q,K,Z,H],this.currentLevelIndex=0,this.level=1}loadLevel(t){const s=this.levels[t];this.applyLevelConfig(s),this.currentLevelIndex=t}loadNextLevel(){const t=this.currentLevelIndex+1;if(t<this.levels.length)this.level+=1,this.loadLevel(t),this.gameManager.resetTimer();else return}applyLevelConfig(t){this.gameManager.bgImage=new Image,this.gameManager.bgImage.src=t.imageSrc,this.gameManager.level=t.level,this.gameManager.numberOfBubbles=t.Bubbles.length,c.bubbleArray=[],c.walls=[],this.gameManager.isWallPresent=t.isWallPresent;for(let s=0;s<t.Bubbles.length;s++){const r=t.Bubbles[s],i=r.centerX;this.bubble=new f(this.gameManager.ctx,s,r.radius,i,r.centerY),c.bubbleArray.push(this.bubble)}t.wallsPosX&&t.wallsPosX.length>0&&t.wallsPosX.forEach(s=>{const r=new w(this.gameManager.ctx,s);c.walls.push(r)}),this.gameManager.initialSetup()}}const it="/Bubble-Trouble/demo/sticky-arrow.png",rt="/Bubble-Trouble/demo/time-powerup.png",at="/Bubble-Trouble/demo/coin-powerup.png";class ot{constructor(t,s,r,i){e(this,"ctx");e(this,"stickyArrowImg");e(this,"timeImg");e(this,"coinImg");e(this,"posX");e(this,"posY");e(this,"width");e(this,"height");e(this,"powerUpOption");this.ctx=t,this.stickyArrowImg=new Image,this.stickyArrowImg.src=it,this.timeImg=new Image,this.timeImg.src=rt,this.coinImg=new Image,this.coinImg.src=at,this.posX=s,this.posY=r,this.width=C.WIDTH,this.height=C.HEIGHT,this.powerUpOption=i}draw(){const t=[this.timeImg,this.coinImg,this.stickyArrowImg];this.ctx.beginPath(),this.ctx.drawImage(t[this.powerUpOption],this.posX,this.posY,this.width,this.height),this.ctx.closePath()}update(){this.posY<o.CANVAS_HEIGHT-m-this.height&&(this.posY+=3)}}function lt(l,t){const s=Math.ceil(l),r=Math.floor(t);return Math.floor(Math.random()*(r-s)+s)}function nt(l,t,s,r,i,a,d,p){return l<i+d&&l+s>i&&t<a+p&&t+r>a}class ht{constructor(t){e(this,"ctx");e(this,"score");this.ctx=t,this.score=0}draw(t=0,s){this.ctx.fillStyle="red",this.ctx.font="20px Arial",s==0&&this.ctx.fillText(`Score: ${t}`,h+150,o.CANVAS_HEIGHT-10),s==1&&this.ctx.fillText(`Score: ${t}`,h+650,o.CANVAS_HEIGHT-10)}}const ct="/Bubble-Trouble/demo/punch-audio.mp3";class N{constructor(t){e(this,"ctx");this.ctx=t}draw(t,s){s==1&&(this.ctx.fillStyle="red",this.ctx.font="20px",this.ctx.fillText(`Lives: ${t} `,o.CANVAS_WIDTH-h-100,o.CANVAS_HEIGHT-50)),s==0&&(this.ctx.fillStyle="red",this.ctx.font="20px",this.ctx.fillText(`Lives: ${t} `,h,o.CANVAS_HEIGHT-50))}}const dt="/Bubble-Trouble/demo/Harpoon-audio.mp3",ut="/Bubble-Trouble/demo/pop-audio.mp3",mt="/Bubble-Trouble/demo/Sliding-audio.mp3",gt="/Bubble-Trouble/demo/game-over.png",n=class n{constructor(t,s,r){e(this,"canvas");e(this,"ctx");e(this,"player");e(this,"x");e(this,"y");e(this,"bgImage");e(this,"bubble");e(this,"ground");e(this,"gameState");e(this,"bubblePlayerDx");e(this,"bubblePlayerDy");e(this,"bubblePlayerDistance");e(this,"bubbleArrowDx");e(this,"bubbleArrowDy");e(this,"bubbleArrowDistance");e(this,"arrow");e(this,"arrowActive");e(this,"numberOfBubbles");e(this,"bubbleRadius");e(this,"tempMovement");e(this,"isBubbleArrowCollisionTrue");e(this,"levelLoader");e(this,"timeLimit");e(this,"elapsedTime");e(this,"startTime");e(this,"timeRemaining");e(this,"adjustedTime");e(this,"level",1);e(this,"wall");e(this,"isWallPresent",!1);e(this,"customLevelConfig");e(this,"powerUp");e(this,"powerUpOption");e(this,"isCollisionPlayerPowerUp",!1);e(this,"score");e(this,"powerUpArray",[]);e(this,"life");e(this,"isPlayerHit",!1);e(this,"players",[]);e(this,"gameOverImg");this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.canvas.width=o.CANVAS_WIDTH,this.canvas.height=o.CANVAS_HEIGHT,this.levelLoader=new st(this),this.x=0,this.y=0,this.gameState=g.RUNNING,this.bgImage=new Image,this.numberOfBubbles=1,this.arrowActive=!1,this.tempMovement=u.STATIONARY,this.timeLimit=40*1e3,this.startTime=Date.now(),this.timeRemaining=this.timeLimit,this.elapsedTime=0,this.adjustedTime=0,this.customLevelConfig=r,n.wallSlidingSound=new Audio(mt),n.wallSlidingSound.loop=!1,n.punchAudio=new Audio(ct),n.punchAudio.loop=!1;for(let i=0;i<s;i++)this.player=new et(this.ctx,i,5,0),this.players.push(this.player);this.customLevelConfig&&(this.levelLoader.levels.push(this.customLevelConfig),this.levelLoader.loadLevel(this.levelLoader.levels.length-1)),this.gameOverImg=new Image,this.gameOverImg.src=gt,this.initialSetup(),this.start(),document.addEventListener("keydown",i=>{this.players.forEach(a=>{i.code===a.controls.left&&(a.movement=u.LEFT,a.tempMovement=u.LEFT),i.code===a.controls.right&&(a.movement=u.RIGHT,a.tempMovement=u.RIGHT)})}),document.addEventListener("keyup",i=>{this.players.forEach(a=>{(i.code===a.controls.left||i.code===a.controls.right)&&(a.movement=u.STATIONARY,a.tempMovement=u.STATIONARY)})}),document.addEventListener("keydown",i=>{this.players.forEach(a=>{i.code===a.controls.shoot&&(new Audio(dt).play(),this.arrow=new b(this.ctx,a.posX),this.arrow.isHittable=!0,a.movement=u.STATIONARY)})}),document.addEventListener("keyup",i=>{this.players.forEach(a=>{i.code===a.controls.shoot&&(a.movement=a.tempMovement)})})}initialSetup(){this.ground=new P(this.ctx,this.level),this.wall=new w(this.ctx,(o.CANVAS_WIDTH-h)/2),this.score=new ht(this.ctx),this.life=new N(this.ctx)}draw(){switch(this.gameState){case g.RUNNING:this.runningStateRender();break;case g.END:this.endGameStateRender();break}}runningStateRender(){var t,s,r;this.ctx.clearRect(this.x,this.y,o.CANVAS_WIDTH,o.CANVAS_HEIGHT),this.ctx.drawImage(this.bgImage,this.x,this.y,this.canvas.width,this.canvas.height),(t=this.arrow)==null||t.draw(),this.players.forEach(i=>i.draw()),this.powerUpArray.forEach(i=>i.draw()),n.bubbleArray.forEach(i=>{i.draw(i.centerX,i.centerY)}),(s=this.wall)==null||s.drawDefaultWalls(),this.ground.draw(),n.walls.forEach(i=>{i.drawExtraWalls()}),this.drawTimer(),((r=n.bubbleArray)==null?void 0:r.length)==0&&this.levelLoader.loadNextLevel(),this.players.forEach((i,a)=>{var d,p;(d=this.score)==null||d.draw(i.score,a),(p=this.life)==null||p.draw(i.life,a)})}drawTimer(){const t=Math.floor(this.timeRemaining/6e4),s=Math.floor(this.timeRemaining%6e4/1e3),r=`${t}:${s<10?"0":""}${s}`;this.ctx.font="24px Arial",this.ctx.fillStyle="white",this.ctx.fillText(r,this.canvas.width-100,50)}resetTimer(){this.adjustedTime=0,this.startTime=Date.now(),this.elapsedTime=0,this.timeRemaining=this.timeLimit}checkCollision(){this.gameState===g.RUNNING&&(n.bubbleArray.forEach(t=>{this.players.forEach(s=>{const r=Math.max(s.posX,Math.min(t.x,s.posX+s.width)),i=Math.max(s.posY,Math.min(t.y,s.posY+s.height)),a=t.x-r,d=t.y-i;Math.sqrt(a*a+d*d)<=t.r&&(n.punchAudio.play(),this.resetGame(s))})}),n.bubbleArray.forEach(t=>{var s;t.isBubbleArrowCollisionTrue=(s=this.arrow)==null?void 0:s.checkCollision(t.centerX,t.centerY,t.radius)}),this.powerUpArray.forEach((t,s)=>{this.players.forEach(r=>{nt(r.posX,r.posY,r.width,r.height,t.posX,t.posY,t.width,t.height)&&(this.isCollisionPlayerPowerUp=!0,this.handlePowerUpCollision(t,s,r))})}))}handlePowerUpCollision(t,s,r){t.powerUpOption==1?r.incrementScore():t.powerUpOption==2?r.activateStickyArrow():this.adjustedTime-=1e4,this.powerUpArray.splice(s,1)}endGameStateRender(){this.gameState=g.END,this.ctx.drawImage(this.gameOverImg,o.CANVAS_WIDTH/2-100,o.CANVAS_HEIGHT/2-200),setTimeout(()=>{location.reload()},3e3)}update(){var t;this.gameState===g.RUNNING&&(this.powerUpArray.forEach(s=>s.update()),this.elapsedTime=Date.now()-this.startTime,this.timeRemaining=this.timeLimit-this.elapsedTime-this.adjustedTime,this.timeRemaining<=0&&(this.gameState=g.END),n.walls.forEach(s=>{s.height<=0&&(this.isWallPresent=!1)}),this.players.forEach(s=>s.update()),n.bubbleArray.forEach((s,r)=>{this.players.forEach(i=>{var a;s.isBubbleArrowCollisionTrue&&this.arrow.isHittable&&this.arrow.isActive&&(new Audio(ut).play(),s.radius<10?(a=n.bubbleArray)==null||a.splice(r,1):(this.powerUpOption=lt(0,3),s.splitBubbles(),this.powerUpArray.push(new ot(this.ctx,s.centerX,s.centerY,this.powerUpOption))),this.arrow.isActive=!1,this.arrow.isHittable=!1,i.incrementScore())})}),n.bubbleArray.forEach(s=>{s.update()}),(t=this.arrow)==null||t.update(),this.checkBubblesOnPlayerSide(),n.walls.forEach(s=>{s.update()}))}resetGame(t){n.bubbleArray=[],this.players.forEach(s=>{s.posX=s.initialPosX}),this.powerUpArray=[],this.wall=new w(this.ctx,(o.CANVAS_WIDTH-h)/2),this.levelLoader.loadLevel(this.level-1),this.resetTimer(),t.updateLives(),this.player.life===0&&(this.gameState=g.END,this.endGameStateRender())}checkBubblesOnPlayerSide(){var t=!0;for(let s of n.bubbleArray)if(n.walls[0]&&s.centerX<=n.walls[0].posX){t=!1;break}if(t&&n.walls[0]){if(n.walls[0].height<=0)return;n.wallSlidingSound.play(),n.walls[0].startDisappearing(),n.walls.shift()}}start(){this.gameState==g.RUNNING&&(this.checkCollision(),this.update(),this.draw(),this.start=this.start.bind(this),requestAnimationFrame(this.start))}};e(n,"bubbleArray",[]),e(n,"wallSlidingSound"),e(n,"punchAudio"),e(n,"walls",[]);let c=n;class pt{constructor(t){e(this,"canvas");e(this,"ctx");e(this,"bgImage");e(this,"ground");e(this,"groundImg");e(this,"bubble");e(this,"gamemanager");e(this,"selectedBubbleRadius",30);e(this,"draggingBubble",!1);e(this,"currentBubble");e(this,"addBubbleButton");e(this,"playButton");e(this,"bubbleOptions");e(this,"wallOptions");e(this,"walls",[]);e(this,"wall");e(this,"draggingWall",!1);e(this,"resizingWall",!1);e(this,"currentWall");e(this,"addWallButton");e(this,"selectedWallIndex",-1);e(this,"life");e(this,"onMouseDown",t=>{const{offsetX:s,offsetY:r}=t;this.currentBubble=c.bubbleArray.find(i=>Math.hypot(i.centerX-s,i.centerY-r)<i.radius),this.currentBubble?this.draggingBubble=!0:(this.selectedWallIndex=c.walls.findIndex(i=>s>=i.posX&&s<=i.posX+i.width&&r>=i.posY&&r<=i.posY+i.height),this.selectedWallIndex>=0&&(this.currentWall=c.walls[this.selectedWallIndex],this.draggingWall=!0,this.resizingWall=s>=this.currentWall.posX+this.currentWall.width-10&&r>=this.currentWall.posY+this.currentWall.height-10))});e(this,"onMouseMove",t=>{const{offsetX:s,offsetY:r}=t;this.draggingBubble&&this.currentBubble?(this.currentBubble.centerX=s,this.currentBubble.centerY=r,this.draw()):this.draggingWall&&this.currentWall&&(this.resizingWall?(this.currentWall.width=Math.max(10,s-this.currentWall.posX),this.currentWall.height=Math.max(10,r-this.currentWall.posY)):this.currentWall.posX=s,c.walls[this.selectedWallIndex]=this.currentWall,this.draw())});e(this,"onMouseUp",()=>{this.draggingBubble=!1,this.currentBubble=void 0,this.draggingWall=!1,this.resizingWall=!1,this.currentWall=void 0});this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.bgImage=new Image,this.bgImage.src=H.imageSrc,this.ground=new P(this.ctx,6),this.groundImg=new Image,this.groundImg.src=v,this.wall=new w(this.ctx,0),this.life=new N(this.ctx),c.bubbleArray=[],this.initialSetup()}initialSetup(){this.clearCanvas(),this.bgImage.onload=()=>{this.groundImg.onload=()=>{this.setupStaticLevel(),this.selectSizeOption(),this.createAddBubbleButton(),this.createPlayButton(),this.createAddWallButton(),this.addEventListeners()}}}setupStaticLevel(){var t;this.ctx.drawImage(this.bgImage,0,0,this.canvas.width,this.canvas.height),(t=this.wall)==null||t.drawDefaultWalls()}selectSizeOption(){const t=document.createElement("select");t.id="ball-options",t.style.position="absolute",t.style.bottom=`${m/2}px`,t.style.left=`${o.CANVAS_WIDTH/4}px`,t.style.zIndex="1",t.style.padding="10px",t.style.border="2px solid #ccc",t.style.borderRadius="5px",t.style.backgroundColor="#fff",t.style.fontSize="16px",t.style.cursor="pointer";const s=document.createElement("option");s.value="",s.textContent="Select Radius",s.disabled=!0,s.selected=!0,t.appendChild(s),[10,20,30,40,50,60].forEach(i=>{const a=document.createElement("option");a.value=i.toString(),a.textContent=i.toString(),t.appendChild(a)}),t.addEventListener("change",i=>{const a=i.target;this.selectedBubbleRadius=parseInt(a.value)}),document.body.appendChild(t),this.bubbleOptions=t}createAddBubbleButton(){const t=document.createElement("button");t.innerText="+",t.style.padding="10px 20px",t.style.position="absolute",t.style.borderRadius="5px",t.style.backgroundColor="green",t.style.bottom=`${m/2}px`,t.style.left=`${o.CANVAS_WIDTH/2-85}px`,t.style.color="#fff",t.style.fontSize="20px",t.style.cursor="pointer",t.onclick=()=>{this.addBubble(this.canvas.width/2,this.canvas.height/2)},document.body.appendChild(t),this.addBubbleButton=t}createAddWallButton(){const t=document.createElement("button");t.innerText="Wall +",t.style.position="absolute",t.style.bottom=`${m/2}px`,t.style.left=`${o.CANVAS_WIDTH/2+300}px`,t.style.padding="10px 20px",t.style.borderRadius="5px",t.style.backgroundColor="blue",t.style.color="#fff",t.style.fontSize="20px",t.style.cursor="pointer",t.onclick=()=>{this.addWall(this.canvas.width/2)},document.body.appendChild(t),this.addWallButton=t}addBubble(t,s){var i;const r=new f(this.ctx,0,this.selectedBubbleRadius,t,s);(i=c.bubbleArray)==null||i.push(r),this.draw()}addWall(t){const s=new w(this.ctx,t);c.walls.push(s),this.draw()}addEventListeners(){this.canvas.addEventListener("mousedown",this.onMouseDown),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseup",this.onMouseUp)}removeEventListeners(){this.canvas.removeEventListener("mousedown",this.onMouseDown),this.canvas.removeEventListener("mousemove",this.onMouseMove),this.canvas.removeEventListener("mouseup",this.onMouseUp)}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}createPlayButton(){const t=document.createElement("button");t.innerText="Play",t.style.padding="10px 20px",t.style.position="absolute",t.style.borderRadius="50px",t.style.backgroundColor="black",t.style.bottom=`${m/2}px`,t.style.left=`${o.CANVAS_WIDTH/2+500}px`,t.style.color="#fff",t.style.fontSize="20px",t.style.cursor="pointer",t.onclick=()=>{const s={imageSrc:W.imageSrc,Bubbles:c.bubbleArray.map(r=>({centerX:r.centerX,centerY:r.centerY,radius:r.radius})),wallsPosX:c.walls.map(r=>r.posX),isWallPresent:!0,level:6};this.removeUIElements(),this.removeEventListeners(),this.gamemanager=new c(this.canvas,1,s)},document.body.appendChild(t),this.playButton=t}removeUIElements(){document.body.removeChild(this.addBubbleButton),this.addBubbleButton=void 0,document.body.removeChild(this.playButton),this.playButton=void 0,document.body.removeChild(this.bubbleOptions),this.bubbleOptions=void 0,document.body.removeChild(this.addWallButton),this.addWallButton=void 0}draw(){var t;this.clearCanvas(),this.setupStaticLevel(),(t=c.bubbleArray)==null||t.forEach(s=>{s.draw(s.centerX,s.centerY)}),c.walls.forEach(s=>{s.drawExtraWalls()})}}class L{constructor(t,s){e(this,"canvas");e(this,"ctx");e(this,"levelButtons",[]);e(this,"numberofPlayers");this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.createUI(),this.addEventListeners(),this.numberofPlayers=s}createUI(){for(let t=1;t<=5;t++){const s=this.createButton(`Level ${t}`,400,150+t*80);this.levelButtons.push(s)}}createButton(t,s,r){const i=document.createElement("button");return i.innerText=t,i.style.position="absolute",i.style.left=`${s}px`,i.style.top=`${r}px`,i.style.padding="20px 50px",i.style.fontSize="20px",i.style.border="2px solid #8B4513",i.style.backgroundColor="red",i.style.color="white",i.style.borderRadius="10px",i.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.3)",i.style.cursor="pointer",document.body.appendChild(i),i}addEventListeners(){this.levelButtons.forEach((t,s)=>{t.addEventListener("click",()=>{this.clearUI(),new c(this.canvas,this.numberofPlayers).levelLoader.loadLevel(s)})})}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}clearUI(){this.levelButtons.forEach(t=>{document.body.removeChild(t)})}}const bt="/Bubble-Trouble/demo/start-screen.png";class wt{constructor(t){e(this,"canvas");e(this,"ctx");e(this,"onePlayerButton");e(this,"twoPlayersButton");e(this,"settingsButton");e(this,"createGameButton");e(this,"backgroundWallImg");e(this,"foregroundImg");this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.backgroundWallImg=new Image,this.backgroundWallImg.src=v,this.foregroundImg=new Image,this.foregroundImg.src=bt,this.createUI(),this.addEventListeners()}createUI(){this.clearCanvas(),this.backgroundWallImg.onload=()=>{this.ctx.drawImage(this.backgroundWallImg,0,0,this.canvas.width,this.canvas.height)},this.foregroundImg.onload=()=>{this.ctx.drawImage(this.foregroundImg,o.CANVAS_WIDTH-400,o.CANVAS_HEIGHT-400,400,400),this.drawTitle()},this.onePlayerButton=this.createButton("One Player",400,300),this.twoPlayersButton=this.createButton("Two Players",400,400),this.createGameButton=this.createButton("Create Game",400,500)}drawTitle(){this.ctx.font='80px "Comic Sans MS", sans-serif',this.ctx.fillStyle="white",this.ctx.strokeStyle="red",this.ctx.lineWidth=3,this.ctx.textAlign="center",this.ctx.fillText("Bubble Trouble",this.canvas.width/2,150),this.ctx.strokeText("Bubble Trouble",this.canvas.width/2,150)}createButton(t,s,r){const i=document.createElement("button");return i.innerText=t,i.style.position="absolute",i.style.left=`${s}px`,i.style.top=`${r}px`,i.style.padding="20px",i.style.fontSize="24px",i.style.border="2px solid #8B4513",i.style.backgroundColor="red",i.style.color="white",i.style.borderRadius="10px",i.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.3)",i.style.cursor="pointer",document.body.appendChild(i),i}addEventListeners(){this.onePlayerButton.addEventListener("click",()=>{this.clearUI(),new L(this.canvas,1)}),this.twoPlayersButton.addEventListener("click",()=>{this.clearUI(),new L(this.canvas,2)}),this.createGameButton.addEventListener("click",()=>{this.clearUI(),new pt(this.canvas)})}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}clearUI(){document.body.removeChild(this.onePlayerButton),document.body.removeChild(this.twoPlayersButton),document.body.removeChild(this.createGameButton),this.onePlayerButton=void 0,this.twoPlayersButton=void 0,this.createGameButton=void 0}}const I=document.querySelector("#canvas");I.width=o.CANVAS_WIDTH;I.height=o.CANVAS_HEIGHT;I.style.border="1px solid black";window.onload=()=>{new wt(I)};
