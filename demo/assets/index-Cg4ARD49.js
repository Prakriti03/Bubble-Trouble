var p=Object.defineProperty;var g=(i,e,s)=>e in i?p(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var t=(i,e,s)=>g(i,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const h of r)if(h.type==="childList")for(const b of h.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&o(b)}).observe(document,{childList:!0,subtree:!0});function s(r){const h={};return r.integrity&&(h.integrity=r.integrity),r.referrerPolicy&&(h.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?h.credentials="include":r.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(r){if(r.ep)return;r.ep=!0;const h=s(r);fetch(r.href,h)}})();const a={CANVAS_HEIGHT:window.innerHeight-10,CANVAS_WIDTH:window.innerWidth-300},u={PLAYER_WIDTH:31,PLAYER_HEIGHT:55},f=3,y=2,w=50,I=100,c=20,x=0,A="/Bubble-Trouble/demo/hero.png";var n=(i=>(i.LEFT="Left",i.RIGHT="Right",i.STATIONARY="Stationary",i))(n||{}),l=(i=>(i.RUNNING="Running",i.PAUSED="Paused",i.END="End",i))(l||{});class m{constructor(e){t(this,"heroImage");t(this,"ctx");t(this,"posX");t(this,"posY");t(this,"movement");t(this,"dx");t(this,"playerWidth");t(this,"playerHeight");t(this,"spriteWidth");t(this,"spriteHeight");t(this,"frameX");t(this,"frameY");t(this,"gameFrame");t(this,"staggerFrame");this.heroImage=new Image,this.heroImage.src=A,this.ctx=e,this.playerHeight=u.PLAYER_HEIGHT,this.playerWidth=u.PLAYER_WIDTH,this.posX=a.CANVAS_WIDTH/2-this.playerWidth,this.posY=a.CANVAS_HEIGHT-this.playerHeight-c,this.dx=5,this.movement=n.STATIONARY,this.spriteWidth=47.25,this.spriteHeight=56,this.frameX=0,this.frameY=0,this.gameFrame=0,this.staggerFrame=15}draw(){this.ctx.beginPath(),this.movement===n.LEFT&&(this.ctx.drawImage(this.heroImage,this.frameX*this.spriteWidth,57,this.spriteWidth,this.spriteHeight,this.posX,this.posY,this.spriteWidth,this.spriteHeight),this.gameFrame%this.staggerFrame==0&&(this.frameX<3?this.frameX++:this.frameX=0),this.gameFrame++),this.movement===n.RIGHT&&(this.ctx.drawImage(this.heroImage,this.frameX*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.posX,this.posY,this.spriteWidth,this.spriteHeight),this.gameFrame%this.staggerFrame==0&&(this.frameX<3?this.frameX++:this.frameX=0),this.gameFrame++),this.movement===n.STATIONARY&&(this.ctx.drawImage(this.heroImage,8,112,31,55,this.posX,this.posY,this.playerWidth,this.playerHeight),this.ctx.closePath())}update(){console.log("inside update"),this.movement===n.LEFT&&(console.log("inside left movement"),this.posX-=this.dx),this.movement===n.RIGHT&&(this.posX+=this.dx)}}const N="/Bubble-Trouble/demo/background.png";class H{constructor(e,s,o){t(this,"ctx");t(this,"centerX");t(this,"centerY");t(this,"radius");t(this,"dy");t(this,"dx");t(this,"numberOfBubbles");t(this,"hasLanded");this.ctx=e,this.centerX=w,this.centerY=I,this.radius=o,this.dy=f,this.dx=y,this.hasLanded=!1,this.numberOfBubbles=s}draw(){this.ctx.beginPath(),console.log("inside bubble draw");const e=this.ctx.createRadialGradient(this.centerX-this.radius/3,this.centerY-this.radius/3,this.radius/4,this.centerX,this.centerY,this.radius);e.addColorStop(0,"white"),e.addColorStop(.5,"red"),e.addColorStop(1,"darkred"),this.ctx.arc(this.centerX,this.centerY,this.radius,0,2*Math.PI,!1),this.ctx.fillStyle=e,this.ctx.fill(),this.ctx.closePath()}resetDy(){this.dy=-this.dy}resetDx(){this.dx=-this.dx}update(){console.log("inside bubble update"),this.centerX+=this.dx,this.centerY+=this.dy}splitBubbles(){this.radius>=20&&(this.radius/=2)}}class S{constructor(e){t(this,"posX");t(this,"posY");t(this,"width");t(this,"height");t(this,"ctx");this.ctx=e,this.posX=x,this.posY=a.CANVAS_HEIGHT-c,this.width=a.CANVAS_WIDTH,this.height=c}draw(){console.log("inside ground draw"),this.ctx.beginPath(),this.ctx.fillStyle="black",this.ctx.fillRect(this.posX,this.posY,this.width,this.height),this.ctx.closePath()}}const T="/Bubble-Trouble/demo/arrow.png";class E{constructor(e,s){t(this,"posX");t(this,"posY");t(this,"ctx");t(this,"player");t(this,"arrowImage");t(this,"isVisible");t(this,"playerMovement");this.ctx=e,this.player=new m(e),this.posX=s+this.player.playerWidth/2,this.posY=a.CANVAS_HEIGHT-c,this.arrowImage=new Image,this.arrowImage.src=T,this.isVisible=!0}draw(){this.isVisible&&this.ctx.drawImage(this.arrowImage,this.posX,this.posY)}update(){this.posY<=0&&(this.isVisible=!1),this.isVisible&&(this.posY-=5)}}class R{constructor(e){t(this,"canvas");t(this,"ctx");t(this,"player");t(this,"x");t(this,"y");t(this,"bgImage");t(this,"bubble");t(this,"ground");t(this,"gameState");t(this,"bubblePlayerDx");t(this,"bubblePlayerDy");t(this,"bubblePlayerDistance");t(this,"bubbleArrowDx");t(this,"bubbleArrowDy");t(this,"bubbleArrowDistance");t(this,"arrow");t(this,"arrowActive");t(this,"numberOfBubbles");t(this,"bubbleRadius");this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.canvas.width=a.CANVAS_WIDTH,this.canvas.height=a.CANVAS_HEIGHT,this.x=0,this.y=0,this.bgImage=new Image,this.bgImage.src=N,this.gameState=l.RUNNING,this.numberOfBubbles=1,this.bubbleRadius=40,this.arrowActive=!1,this.initialSetup(),this.start(),document.addEventListener("keydown",s=>{s.code==="ArrowLeft"&&(this.player.movement=n.LEFT),s.code==="ArrowRight"&&(this.player.movement=n.RIGHT)}),document.addEventListener("keyup",s=>{(s.code==="ArrowLeft"||s.code==="ArrowRight")&&(this.player.movement=n.STATIONARY)}),document.addEventListener("keydown",s=>{s.code==="Space"&&(this.arrow=new E(this.ctx,this.player.posX))})}initialSetup(){this.player=new m(this.ctx),this.bubble=new H(this.ctx,this.numberOfBubbles,this.bubbleRadius),this.ground=new S(this.ctx)}draw(){switch(this.gameState){case l.RUNNING:this.runningStateRender();break;case l.END:this.endGameStateRender();break}}runningStateRender(){var e,s,o,r;this.ctx.clearRect(this.x,this.y,a.CANVAS_WIDTH,a.CANVAS_HEIGHT),this.ctx.drawImage(this.bgImage,this.x,this.y,this.canvas.width,this.canvas.height),(e=this.player)==null||e.draw(),(s=this.bubble)==null||s.draw(),(o=this.ground)==null||o.draw(),(r=this.arrow)==null||r.draw()}checkCollision(){this.bubblePlayerDx=this.bubble.centerX-this.player.posX,this.bubblePlayerDy=this.bubble.centerY-this.player.posY,this.bubblePlayerDistance=Math.sqrt(this.bubblePlayerDx*this.bubblePlayerDx+this.bubblePlayerDy*this.bubblePlayerDy),this.bubblePlayerDistance<=this.bubble.radius&&this.endGameStateRender()}endGameStateRender(){this.gameState=l.END,this.ctx.fillStyle="green",this.ctx.fillRect(100,100,100,100)}update(){var e,s,o,r,h;this.gameState===l.RUNNING&&((e=this.player)==null||e.update(),(this.bubble.centerY+this.bubble.radius>=this.ground.posY||this.bubble.centerY<100)&&((s=this.bubble)==null||s.resetDy()),(this.bubble.centerX+this.bubble.radius>=this.canvas.width||this.bubble.centerX-this.bubble.radius<=0)&&((o=this.bubble)==null||o.resetDx()),(r=this.bubble)==null||r.update(),(h=this.arrow)==null||h.update())}start(){this.draw(),this.checkCollision(),this.update(),this.start=this.start.bind(this),requestAnimationFrame(this.start)}}const d=document.querySelector("#canvas");d.width=a.CANVAS_WIDTH;d.height=a.CANVAS_HEIGHT;d.style.border="1px solid black";new R(d);
