var N=Object.defineProperty;var P=(h,t,s)=>t in h?N(h,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[t]=s;var e=(h,t,s)=>P(h,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const R="/Bubble-Trouble/demo/background.png",D="/Bubble-Trouble/demo/bgImage2.jpeg",U="/Bubble-Trouble/demo/bgImage3.jpeg",l={CANVAS_HEIGHT:window.innerHeight-10,CANVAS_WIDTH:window.innerWidth-300},S={PLAYER_WIDTH:31,PLAYER_HEIGHT:55},G=.5,O=1.5,M=50,V=150,p=100,_=0,k=60,F=.1,n=80,W={WIDTH:30,HEIGHT:30},T={Bubbles:[{centerX:n+30,centerY:250,radius:10}],imageSrc:R,walls:[{posX:100,posY:200,width:50,height:200}],isWallPresent:0,level:1},$={Bubbles:[{centerX:n+60,centerY:250,radius:60}],imageSrc:D,isWallPresent:0,level:2},j={Bubbles:[{centerX:n+30,centerY:250,radius:30},{centerX:800,centerY:250,radius:50}],walls:[{posX:150,posY:250,width:70,height:150},{posX:350,posY:100,width:120,height:120}],imageSrc:U,isWallPresent:1,level:3},B="/Bubble-Trouble/demo/wall.jpg";var d=(h=>(h.LEFT="Left",h.RIGHT="Right",h.STATIONARY="Stationary",h))(d||{}),b=(h=>(h.RUNNING="Running",h.PAUSED="Paused",h.END="End",h.WAITING="Waiting",h))(b||{});class A{constructor(t,s,a,i,r,c){e(this,"img");e(this,"posX");e(this,"posY");e(this,"ctx");e(this,"spriteWidth");e(this,"spriteHeight");e(this,"spriteX");e(this,"spriteY");this.img=new Image,this.img.src=s,this.spriteWidth=47.25,this.spriteHeight=56,this.ctx=t,this.spriteX=a,this.spriteY=i,this.posX=r,this.posY=c,this.drawSprite()}drawSprite(){this.ctx.drawImage(this.img,this.spriteX,this.spriteY,this.spriteWidth,this.spriteHeight,this.posX,this.posY,this.spriteWidth,this.spriteHeight)}}class v{constructor(t,s,a,i,r){e(this,"posX");e(this,"posY");e(this,"width");e(this,"height");e(this,"ctx");e(this,"wallImage");e(this,"disappearing",!1);e(this,"disappearingSpeed",10);this.posX=s,this.posY=a,this.width=i,this.height=r,this.ctx=t,this.wallImage=new Image,this.wallImage.src=B}drawExtraWalls(){this.ctx.drawImage(this.wallImage,this.posX,this.posY,this.width,this.height)}startDisappearing(){this.disappearing=!0}update(){this.disappearing&&this.height>0&&(this.height-=this.disappearingSpeed)}drawDefaultWalls(){this.ctx.drawImage(this.wallImage,0,0,n,l.CANVAS_HEIGHT),this.ctx.drawImage(this.wallImage,l.CANVAS_WIDTH-n,0,n,l.CANVAS_HEIGHT)}}const y="/Bubble-Trouble/demo/hero.png";class H{constructor(t){e(this,"heroImage");e(this,"ctx");e(this,"posX");e(this,"posY");e(this,"movement");e(this,"dx");e(this,"playerWidth");e(this,"playerHeight");e(this,"spriteWidth");e(this,"spriteHeight");e(this,"frameX");e(this,"frameY");e(this,"gameFrame");e(this,"staggerFrame");e(this,"sprite");e(this,"wall");this.heroImage=new Image,this.heroImage.src=y,this.ctx=t,this.playerHeight=S.PLAYER_HEIGHT,this.playerWidth=S.PLAYER_WIDTH,this.posX=n,this.posY=l.CANVAS_HEIGHT-this.playerHeight-p,this.dx=3,this.movement=d.STATIONARY,this.spriteWidth=47.25,this.spriteHeight=56,this.frameX=0,this.frameY=0,this.gameFrame=0,this.staggerFrame=20,this.wall=new v(this.ctx,(l.CANVAS_WIDTH-n)/2,0,n/2,l.CANVAS_HEIGHT-p)}get x(){return this.posX}get y(){return this.posY}get width(){return this.playerWidth}get height(){return this.playerHeight}draw(){this.ctx.beginPath(),this.movement===d.STATIONARY&&(this.sprite=new A(this.ctx,y,8,112,this.posX,this.posY)),this.movement===d.LEFT&&(this.sprite=new A(this.ctx,y,this.frameX*this.spriteWidth,57,this.posX,this.posY),this.gameFrame%this.staggerFrame==0&&(this.frameX<3?this.frameX++:this.frameX=0),this.gameFrame++),this.movement===d.RIGHT&&(this.sprite=new A(this.ctx,y,this.frameX*this.spriteWidth,0,this.posX,this.posY),this.gameFrame%this.staggerFrame==0&&(this.frameX<3?this.frameX++:this.frameX=0),this.gameFrame++),this.ctx.closePath()}update(t){this.movement===d.LEFT&&this.posX>=n&&(this.posX-=this.dx),t&&this.posX>=this.wall.posX-this.playerWidth&&(this.posX-=this.dx),this.posX>=this.wall.posX-this.playerWidth,this.movement===d.RIGHT&&this.posX+this.spriteWidth<=l.CANVAS_WIDTH-n&&(this.posX+=this.dx)}}class Y{constructor(t){e(this,"posX");e(this,"posY");e(this,"width");e(this,"height");e(this,"ctx");e(this,"groundImg");this.ctx=t,this.posX=_,this.posY=l.CANVAS_HEIGHT-p,this.width=l.CANVAS_WIDTH,this.height=p,this.groundImg=new Image,this.groundImg.src=B}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.groundImg,this.posX,this.posY,this.width,this.height),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.closePath(),this.drawTexts("Player 1",n,l.CANVAS_HEIGHT-10),this.drawTexts("Level",(l.CANVAS_WIDTH-n)/2,l.CANVAS_HEIGHT-50),this.drawTexts("Player 2",l.CANVAS_WIDTH-n-100,l.CANVAS_HEIGHT-10)}drawTexts(t,s,a){this.ctx.font="24px Luckiest Guy",this.ctx.fillStyle="red";const i=t,c=this.ctx.measureText(i).width,g=parseInt(this.ctx.font,7),m=7,E=s-m,X=a-g-m,L=c+2*m,C=g+2*m;this.ctx.fillStyle="#D3D3D3",this.ctx.fillRect(E,X,L,C),this.ctx.strokeStyle="grey",this.ctx.lineWidth=3,this.ctx.strokeRect(E,X,L,C),this.ctx.fillStyle="red",this.ctx.fillText(i,s,a)}}const z="/Bubble-Trouble/demo/arrow.png",x=class x{constructor(t,s){e(this,"posX");e(this,"posY");e(this,"ctx");e(this,"player");e(this,"arrowImage");e(this,"isActive");e(this,"playerMovement");e(this,"bubbleArray");e(this,"isBubbleArrowCollisionTrue");e(this,"isHittable",!1);this.ctx=t,this.player=new H(t),this.posX=s+this.player.playerWidth/2,this.posY=l.CANVAS_HEIGHT-p,this.arrowImage=new Image,this.arrowImage.src=z,this.isActive=!0}draw(){this.isActive&&this.ctx.drawImage(this.arrowImage,this.posX,this.posY)}update(){x.isSticky&&this.posY<=0||(this.posY<=0&&(this.isActive=!1),this.isActive&&(this.posY-=6))}checkCollision(t,s,a){return this.posX>=t-a&&this.posX<=t+a&&this.posY<=s+a}};e(x,"isSticky",!1);let f=x;class w{constructor(t,s,a,i,r){e(this,"ctx");e(this,"centerX");e(this,"centerY");e(this,"radius");e(this,"dy");e(this,"dx");e(this,"numberOfBubbles");e(this,"bubblePlayerDx");e(this,"bubblePlayerDy");e(this,"bubblePlayerDistance");e(this,"closestPlayerPosX");e(this,"closestPlayerPosY");e(this,"isBubbleArrowCollisionTrue");e(this,"isPlayerBubbleCollisionTrue");e(this,"mass");e(this,"gravity");e(this,"wall");this.ctx=t,this.centerX=i,this.centerY=r,this.radius=a,this.gravity=F,this.dy=G,this.dx=O,this.numberOfBubbles=s,this.mass=this.radius,this.wall=new v(this.ctx,(l.CANVAS_WIDTH-n)/2,0,n/2,l.CANVAS_HEIGHT-p)}getBallGradient(t,s,a){const i=this.ctx.createRadialGradient(this.centerX-this.radius/3,this.centerY-this.radius/3,this.radius/4,this.centerX,this.centerY,this.radius);return i.addColorStop(0,t),i.addColorStop(.5,s),i.addColorStop(1,a),i}get x(){return this.centerX}get y(){return this.centerY}get r(){return this.radius}draw(t,s){const a=this.getBallGradient("white","red","darkred");this.ctx.beginPath(),this.ctx.arc(t,s,this.radius,0,2*Math.PI,!1),this.ctx.fillStyle=a,this.ctx.fill(),this.ctx.closePath()}calculateInitialVelocity(t){return-4*(1+t/k)}update(t){this.dy+=this.gravity,this.centerX+=this.dx,this.centerY+=this.dy,this.centerY+this.radius>=l.CANVAS_HEIGHT-p&&(this.centerY=l.CANVAS_HEIGHT-p-this.radius,this.dy=this.calculateInitialVelocity(this.radius)),(this.centerX+this.radius>=l.CANVAS_WIDTH-n||this.centerX-this.radius<=n)&&(this.dx*=-1),t&&(this.centerX+this.radius>=this.wall.posX&&this.centerX+this.radius<=this.wall.posX+n/2||this.centerX-this.radius<=this.wall.posX+n/2&&this.centerX+this.radius>this.wall.posX)&&(this.dx*=-1)}splitBubbles(){this.radius/=2;const t=new w(this.ctx,this.numberOfBubbles,this.radius,this.centerX,this.centerY);t.centerX=this.centerX-this.radius,t.centerY=this.centerY,t.dx=-Math.abs(this.dx),t.dy=this.calculateInitialVelocity(this.radius)*.8;const s=new w(this.ctx,this.numberOfBubbles,this.radius,M,V);s.centerX=this.centerX+this.radius,s.centerY=this.centerY,s.dx=Math.abs(this.dx),s.dy=this.calculateInitialVelocity(this.radius)*.8;const a=u.bubbleArray.indexOf(this);a>=0&&a<u.bubbleArray.length&&u.bubbleArray.splice(a,1),u.bubbleArray.push(t,s)}}class q{constructor(t){e(this,"gameManager");e(this,"levels");e(this,"currentLevelIndex");e(this,"bubble");e(this,"level");this.gameManager=t,this.levels=[T,$,j],this.currentLevelIndex=0,this.level=1}loadLevel(t){const s=this.levels[t];this.applyLevelConfig(s),this.currentLevelIndex=t}loadNextLevel(){const t=this.currentLevelIndex+1;if(t<this.levels.length)this.level+=1,this.loadLevel(t),this.gameManager.resetTimer();else return}applyLevelConfig(t){this.gameManager.bgImage=new Image,this.gameManager.bgImage.src=t.imageSrc,this.gameManager.level=t.level,this.gameManager.numberOfBubbles=t.Bubbles.length,u.bubbleArray=[],this.gameManager.isWallPresent=t.isWallPresent;for(let s=0;s<t.Bubbles.length;s++){const a=t.Bubbles[s],i=a.centerX;this.bubble=new w(this.gameManager.ctx,s,a.radius,i,a.centerY),u.bubbleArray.push(this.bubble)}this.gameManager.initialSetup()}}const Z="/Bubble-Trouble/demo/sticky-arrow.png",K="/Bubble-Trouble/demo/time-powerup.png",J="/Bubble-Trouble/demo/coin-powerup.png";class Q{constructor(t,s,a,i){e(this,"ctx");e(this,"stickyArrowImg");e(this,"timeImg");e(this,"coinImg");e(this,"posX");e(this,"posY");e(this,"width");e(this,"height");e(this,"powerUpOption");this.ctx=t,this.stickyArrowImg=new Image,this.stickyArrowImg.src=Z,this.timeImg=new Image,this.timeImg.src=K,this.coinImg=new Image,this.coinImg.src=J,this.posX=s,this.posY=a,this.width=W.WIDTH,this.height=W.HEIGHT,this.powerUpOption=i}draw(){const t=[this.timeImg,this.coinImg,this.stickyArrowImg];this.ctx.beginPath(),this.ctx.drawImage(t[this.powerUpOption],this.posX,this.posY,this.width,this.height),this.ctx.closePath()}update(){this.posY<l.CANVAS_HEIGHT-p-this.height&&(this.posY+=3)}}function tt(h,t){const s=Math.ceil(h),a=Math.floor(t);return Math.floor(Math.random()*(a-s)+s)}function et(h,t,s,a,i,r,c,g){return h<i+c&&h+s>i&&t<r+g&&t+a>r}class st{constructor(t){e(this,"ctx");e(this,"score");this.ctx=t,this.score=0}increment(){this.score+=10}draw(){this.ctx.fillStyle="white",this.ctx.font="20px Arial",this.ctx.fillText(`Score: ${this.score}`,10,30)}}const it="/Bubble-Trouble/demo/Harpoon-audio.mp3",at="/Bubble-Trouble/demo/pop-audio.mp3",rt="/Bubble-Trouble/demo/Sliding-audio.mp3",ht="/Bubble-Trouble/demo/punch-audio.mp3",o=class o{constructor(t,s){e(this,"canvas");e(this,"ctx");e(this,"player");e(this,"x");e(this,"y");e(this,"bgImage");e(this,"bubble");e(this,"ground");e(this,"gameState");e(this,"bubblePlayerDx");e(this,"bubblePlayerDy");e(this,"bubblePlayerDistance");e(this,"bubbleArrowDx");e(this,"bubbleArrowDy");e(this,"bubbleArrowDistance");e(this,"arrow");e(this,"arrowActive");e(this,"numberOfBubbles");e(this,"bubbleRadius");e(this,"tempMovement");e(this,"isBubbleArrowCollisionTrue");e(this,"levelLoader");e(this,"timeLimit");e(this,"elapsedTime");e(this,"startTime");e(this,"timeRemaining");e(this,"adjustedTime");e(this,"level");e(this,"wall");e(this,"isWallPresent",!1);e(this,"isBubbleToWallRight",!1);e(this,"customLevelConfig");e(this,"powerUp");e(this,"powerUpOption");e(this,"isCollisionPlayerPowerUp",!1);e(this,"score");e(this,"powerUpArray",[]);this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.canvas.width=l.CANVAS_WIDTH,this.canvas.height=l.CANVAS_HEIGHT,this.levelLoader=new q(this),this.x=0,this.y=0,this.gameState=b.RUNNING,this.bgImage=new Image,this.numberOfBubbles=1,o.bubbleArray=[],this.arrowActive=!1,this.tempMovement=d.STATIONARY,this.timeLimit=40*1e3,this.startTime=Date.now(),this.timeRemaining=this.timeLimit,this.elapsedTime=0,this.adjustedTime=0,this.customLevelConfig=s,o.wallSlidingSound=new Audio(rt),o.wallSlidingSound.loop=!1,o.punchAudio=new Audio(ht),o.punchAudio.loop=!1,this.customLevelConfig&&(this.levelLoader.levels.push(this.customLevelConfig),this.levelLoader.loadLevel(this.levelLoader.levels.length-1)),this.initialSetup(),this.start(),document.addEventListener("keydown",a=>{a.code==="ArrowLeft"&&(this.player.movement=d.LEFT,this.tempMovement=d.LEFT),a.code==="ArrowRight"&&(this.player.movement=d.RIGHT,this.tempMovement=d.RIGHT)}),document.addEventListener("keyup",a=>{(a.code==="ArrowLeft"||a.code==="ArrowRight")&&(this.player.movement=d.STATIONARY,this.tempMovement=d.STATIONARY)}),document.addEventListener("keydown",a=>{a.code==="Space"&&(new Audio(it).play(),this.arrow=new f(this.ctx,this.player.posX),this.arrow.isHittable=!0,this.player.movement=d.STATIONARY)}),document.addEventListener("keyup",a=>{a.code==="Space"&&(this.player.movement=this.tempMovement)})}initialSetup(){this.player=new H(this.ctx),this.ground=new Y(this.ctx),this.wall=new v(this.ctx,(l.CANVAS_WIDTH-n)/2,0,n/2,l.CANVAS_HEIGHT-p),this.score=new st(this.ctx)}draw(){switch(this.gameState){case b.RUNNING:this.runningStateRender();break;case b.END:this.endGameStateRender();break}}runningStateRender(){var t,s,a,i,r,c,g;this.ctx.clearRect(this.x,this.y,l.CANVAS_WIDTH,l.CANVAS_HEIGHT),this.ctx.drawImage(this.bgImage,this.x,this.y,this.canvas.width,this.canvas.height),(t=this.arrow)==null||t.draw(),(s=this.player)==null||s.draw(),this.powerUpArray.forEach(m=>m.draw()),o.bubbleArray.forEach(m=>{m.draw(m.centerX,m.centerY)}),(a=this.wall)==null||a.drawDefaultWalls(),(i=this.ground)==null||i.draw(),this.isWallPresent&&((r=this.wall)==null||r.drawExtraWalls()),this.drawTimer(),((c=o.bubbleArray)==null?void 0:c.length)==0&&this.levelLoader.loadNextLevel(),(g=this.score)==null||g.draw()}drawTimer(){const t=Math.floor(this.timeRemaining/6e4),s=Math.floor(this.timeRemaining%6e4/1e3),a=`${t}:${s<10?"0":""}${s}`;this.ctx.font="24px Arial",this.ctx.fillStyle="white",this.ctx.fillText(a,this.canvas.width-100,50)}resetTimer(){this.adjustedTime=0,this.startTime=Date.now(),this.elapsedTime=0,this.timeRemaining=this.timeLimit}waitingStateRender(){this.gameState=b.WAITING,this.ctx.fillStyle="red",this.ctx.fillRect(100,100,100,100),this.levelLoader.loadNextLevel()}checkCollision(){this.gameState===b.RUNNING&&(o.bubbleArray.forEach(t=>{const s=Math.max(this.player.posX,Math.min(t.x,this.player.posX+this.player.width)),a=Math.max(this.player.posY,Math.min(t.y,this.player.posY+this.player.height)),i=t.x-s,r=t.y-a;Math.sqrt(i*i+r*r)<=t.r&&(o.punchAudio.play(),this.gameState=b.END)}),o.bubbleArray.forEach(t=>{var s;t.isBubbleArrowCollisionTrue=(s=this.arrow)==null?void 0:s.checkCollision(t.centerX,t.centerY,t.radius)}),console.log(this.elapsedTime),this.powerUpArray.forEach((t,s)=>{et(this.player.posX,this.player.posY,this.player.width,this.player.height,t.posX,t.posY,t.width,t.height)&&(this.isCollisionPlayerPowerUp=!0,this.handlePowerUpCollision(t,s))}))}handlePowerUpCollision(t,s){var a;t.powerUpOption==1?(a=this.score)==null||a.increment():t.powerUpOption==2?f.isSticky=!0:this.adjustedTime-=1e4,this.powerUpArray.splice(s,1)}endGameStateRender(){this.gameState=b.END,this.ctx.fillStyle="green",this.ctx.fillRect(100,100,100,100)}update(){var t,s,a;this.gameState===b.RUNNING&&(this.powerUpArray.forEach(i=>i.update()),this.elapsedTime=Date.now()-this.startTime,this.timeRemaining=this.timeLimit-this.elapsedTime-this.adjustedTime,this.timeRemaining<=0&&(this.gameState=b.END),this.wall.height<=0&&(this.isWallPresent=!1),(t=this.player)==null||t.update(this.isWallPresent),o.bubbleArray.forEach((i,r)=>{var c,g;i.isBubbleArrowCollisionTrue&&this.arrow.isHittable&&this.arrow.isActive&&(new Audio(at).play(),i.radius<10?(c=o.bubbleArray)==null||c.splice(r,1):(this.powerUpOption=tt(0,3),i.splitBubbles(),this.powerUpArray.push(new Q(this.ctx,i.centerX,i.centerY,this.powerUpOption))),this.arrow.isActive=!1,this.arrow.isHittable=!1,(g=this.score)==null||g.increment())}),o.bubbleArray.forEach(i=>{i.update(this.isWallPresent)}),(s=this.arrow)==null||s.update(),this.checkBubblesOnPlayerSide(),(a=this.wall)==null||a.update())}checkBubblesOnPlayerSide(){var s;let t=!0;for(let a of o.bubbleArray)if(a.centerX<=this.wall.posX){t=!1;break}if(t){if(this.wall.height<=0)return;o.wallSlidingSound.play(),(s=this.wall)==null||s.startDisappearing()}}start(){this.checkCollision(),this.update(),this.draw(),this.start=this.start.bind(this),requestAnimationFrame(this.start)}};e(o,"bubbleArray"),e(o,"wallSlidingSound"),e(o,"punchAudio");let u=o;class lt{constructor(t){e(this,"canvas");e(this,"ctx");e(this,"bgImage");e(this,"ground");e(this,"groundImg");e(this,"bubble");e(this,"gamemanager");e(this,"selectedBubbleRadius",30);e(this,"draggingBubble",!1);e(this,"currentBubble");e(this,"addBubbleButton");e(this,"playButton");e(this,"bubbleOptions");e(this,"wallOptions");e(this,"walls",[]);e(this,"wall");e(this,"draggingWall",!1);e(this,"resizingWall",!1);e(this,"currentWall");e(this,"addWallButton");e(this,"selectedWallIndex",-1);e(this,"onMouseDown",t=>{const{offsetX:s,offsetY:a}=t;this.currentBubble=u.bubbleArray.find(i=>Math.hypot(i.centerX-s,i.centerY-a)<i.radius),this.currentBubble?this.draggingBubble=!0:(this.selectedWallIndex=this.walls.findIndex(i=>s>=i.posX&&s<=i.posX+i.width&&a>=i.posY&&a<=i.posY+i.height),this.selectedWallIndex>=0&&(this.currentWall=this.walls[this.selectedWallIndex],this.draggingWall=!0,this.resizingWall=s>=this.wall.posX+this.wall.width-10&&a>=this.wall.posY+this.wall.height-10))});e(this,"onMouseMove",t=>{const{offsetX:s,offsetY:a}=t;this.draggingBubble&&this.currentBubble?(this.currentBubble.centerX=s,this.currentBubble.centerY=a,this.draw()):this.draggingWall&&this.currentWall&&(this.resizingWall?(this.currentWall.width=Math.max(10,s-this.currentWall.posX),this.currentWall.height=Math.max(10,a-this.currentWall.posY)):this.currentWall.posX=s,this.draw())});e(this,"onMouseUp",()=>{this.draggingBubble=!1,this.currentBubble=void 0,this.draggingWall=!1,this.resizingWall=!1,this.currentWall=void 0});this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.bgImage=new Image,this.bgImage.src=T.imageSrc,this.ground=new Y(this.ctx),this.groundImg=new Image,this.groundImg.src=B,u.bubbleArray=[],this.initialSetup()}initialSetup(){this.clearCanvas(),this.bgImage.onload=()=>{this.groundImg.onload=()=>{this.setupStaticLevel(),this.selectSizeOption(),this.createAddBubbleButton(),this.createPlayButton(),this.createAddWallButton(),this.addEventListeners()}}}setupStaticLevel(){this.ctx.beginPath(),this.ctx.drawImage(this.bgImage,0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="black",this.ctx.fillRect(this.canvas.width/2,this.canvas.height-p-S.PLAYER_HEIGHT,50,50),this.ground.draw()}selectSizeOption(){const t=document.createElement("select");t.id="ball-options",t.style.position="absolute",t.style.bottom=`${p/2}px`,t.style.left=`${l.CANVAS_WIDTH/4}px`,t.style.zIndex="1";const s=document.createElement("option");s.value="",s.textContent="Select Radius",s.disabled=!0,s.selected=!0,t.appendChild(s),[10,20,30,40,50,60].forEach(i=>{const r=document.createElement("option");r.value=i.toString(),r.textContent=i.toString(),t.appendChild(r)}),t.addEventListener("change",i=>{const r=i.target;this.selectedBubbleRadius=parseInt(r.value)}),document.body.appendChild(t),this.bubbleOptions=t}createAddBubbleButton(){const t=document.createElement("button");t.innerText="+",t.style.position="absolute",t.style.bottom=`${p/2}px`,t.style.left=`${l.CANVAS_WIDTH/2-150}px`,t.style.zIndex="1",t.onclick=()=>{this.addBubble(this.canvas.width/2,this.canvas.height/2)},document.body.appendChild(t),this.addBubbleButton=t}createAddWallButton(){const t=document.createElement("button");t.innerText="+",t.style.position="absolute",t.style.bottom=`${p/2}px`,t.style.left=`${l.CANVAS_WIDTH/2+70}px`,t.style.zIndex="1",t.onclick=()=>{this.addWall(this.canvas.width/2,0)},document.body.appendChild(t),this.addWallButton=t}addBubble(t,s){var i;const a=new w(this.ctx,0,this.selectedBubbleRadius,t,s);(i=u.bubbleArray)==null||i.push(a),this.draw()}addWall(t,s){this.wall=new v(this.ctx,t,s,n/2,this.canvas.height-p),this.walls.push(this.wall),this.draw()}addEventListeners(){this.canvas.addEventListener("mousedown",this.onMouseDown),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mouseup",this.onMouseUp)}removeEventListeners(){this.canvas.removeEventListener("mousedown",this.onMouseDown),this.canvas.removeEventListener("mousemove",this.onMouseMove),this.canvas.removeEventListener("mouseup",this.onMouseUp)}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}createPlayButton(){const t=document.createElement("button");t.innerText="Play",t.style.position="absolute",t.style.top="100px",t.style.right="100px",t.onclick=()=>{const s={imageSrc:T.imageSrc,Bubbles:u.bubbleArray.map(a=>({centerX:a.centerX,centerY:a.centerY,radius:a.radius})),Walls:this.walls.map(a=>({posX:a.posX,posY:a.posY,width:a.width,height:a.height})),isWallPresent:!0,level:4};this.removeUIElements(),this.removeEventListeners(),this.gamemanager=new u(this.canvas,s)},document.body.appendChild(t),this.playButton=t}removeUIElements(){document.body.removeChild(this.addBubbleButton),this.addBubbleButton=void 0,document.body.removeChild(this.playButton),this.playButton=void 0,document.body.removeChild(this.bubbleOptions),this.bubbleOptions=void 0,document.body.removeChild(this.addWallButton),this.addWallButton=void 0}draw(){var t;this.clearCanvas(),this.setupStaticLevel(),(t=u.bubbleArray)==null||t.forEach(s=>{s.draw(s.centerX,s.centerY)}),this.walls.forEach(s=>{s.drawExtraWalls()})}}class nt{constructor(t){e(this,"canvas");e(this,"ctx");e(this,"levelButtons",[]);this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.createUI(),this.addEventListeners()}createUI(){this.clearCanvas(),this.ctx.font="30px Arial",this.ctx.fillStyle="black",this.ctx.fillText("Select Level",100,100);for(let t=1;t<=5;t++){const s=this.createButton(`Level ${t}`,500,150+t*50);this.levelButtons.push(s)}}createButton(t,s,a){const i=document.createElement("button");return i.innerText=t,i.style.position="absolute",i.style.left=`${s}px`,i.style.top=`${a}px`,document.body.appendChild(i),i}addEventListeners(){this.levelButtons.forEach((t,s)=>{t.addEventListener("click",()=>{this.clearUI(),new u(this.canvas).levelLoader.loadLevel(s)})})}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}clearUI(){this.levelButtons.forEach(t=>{document.body.removeChild(t)})}}class ot{constructor(t){e(this,"canvas");e(this,"ctx");e(this,"startButton");e(this,"selectPlayerButton");e(this,"settingsButton");e(this,"createGameButton");this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.createUI(),this.addEventListeners()}createUI(){this.clearCanvas(),this.ctx.font="30px Arial",this.ctx.fillStyle="black",this.ctx.fillText("Bubble Trouble Game",100,100),this.startButton=this.createButton("Start Game",500,200),this.selectPlayerButton=this.createButton("Select Player",500,300),this.settingsButton=this.createButton("Settings",500,400),this.createGameButton=this.createButton("Create Game",500,500)}createButton(t,s,a){const i=document.createElement("button");return i.innerText=t,i.style.position="absolute",i.style.left=`${s}px`,i.style.top=`${a}px`,document.body.appendChild(i),i}addEventListeners(){this.startButton.addEventListener("click",()=>{this.clearUI(),new nt(this.canvas)}),this.createGameButton.addEventListener("click",()=>{this.clearUI(),new lt(this.canvas)})}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}clearUI(){document.body.removeChild(this.startButton),document.body.removeChild(this.selectPlayerButton),document.body.removeChild(this.settingsButton),document.body.removeChild(this.createGameButton)}}const I=document.querySelector("#canvas");I.width=l.CANVAS_WIDTH;I.height=l.CANVAS_HEIGHT;I.style.border="1px solid black";new ot(I);
